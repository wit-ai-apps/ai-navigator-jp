<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Navigator JP | v99.2 Final</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, updateDoc, doc, addDoc, getDocs, deleteDoc, writeBatch, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC990U7XauADarvkUw-WDM7_NMNssp6x2U",
            authDomain: "ai-navigator-jp.firebaseapp.com",
            projectId: "ai-navigator-jp",
            storageBucket: "ai-navigator-jp.firebasestorage.app",
            messagingSenderId: "533690073056",
            appId: "1:533690073056:web:41da64545b73f14fcd3585"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- å…¨110ä»¶ã€ç‰©ç†çš„ãªã‚«ãƒ†ã‚´ãƒªé …ç›®ä»˜ãæ‰‹æ›¸ãé…åˆ—ï¼ˆã“ã‚Œä»¥å¤–ã¯èªã‚ãªã„ï¼‰ ---
        const finalMaster = [
            { cat: "ãƒãƒ£ãƒƒãƒˆAI", rank: 1, name: "ChatGPT", company: "OpenAI", flag: "ğŸ‡ºğŸ‡¸", version: "o3-mini", rating: 5, lang: "JP", web: true, app: true, url: "https://chatgpt.com", login_url: "https://chatgpt.com/auth/login", desc: "AIã®ç‹è€…ã€‚o3-miniã®è«–ç†æ€è€ƒã¯æ—¥æœ¬ã§ã‚‚æœ€é«˜è©•ä¾¡ã€‚å¯¾è©±ã®æ ã‚’è¶…ãˆãŸä¸‡èƒ½æ©Ÿã€‚", detail: "OpenAIæä¾›ã€‚ç”»åƒç”Ÿæˆãƒ»é«˜åº¦ãªæ¨è«–ã‚’çµ±åˆã€‚æ—¥æœ¬äººã®ä»•äº‹ã«æœ€ã‚‚æ·±ãé£Ÿã„è¾¼ã‚“ã§ã„ã‚‹è¦‡è€…ã€‚" },
            { cat: "ãƒãƒ£ãƒƒãƒˆAI", rank: 2, name: "Claude", company: "Anthropic", flag: "ğŸ‡ºğŸ‡¸", version: "3.7 Sonnet", rating: 5, lang: "JP", web: true, app: true, url: "https://anthropic.com/claude", login_url: "https://claude.ai/login", desc: "æ—¥æœ¬ã§æœ€ã‚‚æ„›ã•ã‚Œã‚‹è‡ªç„¶ãªæ—¥æœ¬èªã€‚ç·»å¯†ãªåˆ†æèƒ½åŠ›ã¨Artifactsã«ã‚ˆã‚‹å³æ™‚é–‹ç™ºã€‚", detail: "æ—¥æœ¬èªãŒä¸å¯§ã€‚è³‡æ–™ä½œæˆã‚„ã‚¢ãƒ—ãƒªè©¦ä½œã‚’ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å³åº§ã«å®Ÿè¡Œå¯èƒ½ã€‚é–‹ç™ºè€…ã‹ã‚‰æ”¯æŒã€‚" },
            { cat: "ç”»åƒç”Ÿæˆ", rank: 6, name: "Midjourney", company: "Midjourney", flag: "ğŸ‡ºğŸ‡¸", version: "v6.1", rating: 5, lang: "EN", web: true, app: false, url: "https://www.midjourney.com/", login_url: "https://www.midjourney.com/auth/login", desc: "èŠ¸è¡“çš„ç”»åƒç”Ÿæˆã®é ‚ç‚¹ã€‚è¨€è‘‰ã‹ã‚‰ãƒ—ãƒ­ç´šã®ã‚¢ãƒ¼ãƒˆã‚’ç”Ÿæˆã€‚æ—¥æœ¬ã®ã‚¢ãƒ¼ãƒˆç•Œã®æ¨™æº–ã€‚", detail: "ä¸€è²«ã—ãŸç”»è³ªã¨ç‹¬è‡ªã®ç¾çš„ã‚»ãƒ³ã‚¹ã§ã€ãƒ—ãƒ­ã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã‹ã‚‰çµ¶å¤§ãªæ”¯æŒã€‚" },
            { cat: "å‹•ç”»ç”Ÿæˆ", rank: 7, name: "Runway", company: "Runway", flag: "ğŸ‡ºğŸ‡¸", version: "Gen-3 Alpha", rating: 4, lang: "EN", web: true, app: true, url: "https://runwayml.com/", login_url: "https://runwayml.com/login", desc: "æ˜ ç”»å“è³ªã®å‹•ç”»ç”Ÿæˆã€‚æ˜ åƒåˆ¶ä½œã®å¸¸è­˜ã‚’è¦†ã™ãƒªã‚¢ãƒ«ãªæå†™ã€‚Gen-3ã«ã‚ˆã‚‹é€²åŒ–ã€‚", detail: "ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰å‹•ç”»ã‚’ç”Ÿæˆã€‚æ—¥æœ¬ã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã‹ã‚‰ã‚‚é«˜ã„è©•ä¾¡ã‚’å¾—ã¦ã„ã‚‹ã€‚" },
            { cat: "ã‚³ãƒ¼ãƒ‰", rank: 8, name: "Cursor", company: "Anysphere", flag: "ğŸ‡ºğŸ‡¸", version: "v0.45", rating: 5, lang: "JP", web: false, app: true, url: "https://cursor.com/", login_url: "https://cursor.com/login", desc: "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ¨™æº–è£…å‚™ã€‚æ—¥æœ¬èªã§æŒ‡ç¤ºã™ã‚‹ã ã‘ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨åŸŸã‚’æŠŠæ¡ã—å®Ÿè£…ã€‚", detail: "VSCodeãƒ™ãƒ¼ã‚¹ã®æœ€å¼·AIã‚¨ãƒ‡ã‚£ã‚¿ã€‚ãƒ‡ãƒãƒƒã‚°èƒ½åŠ›ã€æ–°æ©Ÿèƒ½å®Ÿè£…ã®é€Ÿåº¦ã«ãŠã„ã¦ä»–ã‚’åœ§å€’ã€‚" },
            { cat: "ç¿»è¨³", rank: 9, name: "DeepL", company: "DeepL SE", flag: "ğŸ‡©ğŸ‡ª", version: "v2.0", rating: 5, lang: "JP", web: true, app: true, url: "https://www.deepl.com/translator", login_url: "https://www.deepl.com/login", desc: "ä¸–ç•Œæœ€å¼·ã®æ©Ÿæ¢°ç¿»è¨³ã€‚ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚’å®Œç’§ã«æ‰ãˆã€æ—¥æœ¬ã®ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ•ãƒ©ã«æ˜‡è¯ã€‚", detail: "è‡ªç„¶ãªè¨³æ–‡ã§è¨€èªã®å£ã‚’ç ´å£Šã€‚æ—¥æœ¬å¸‚å ´ã«ãŠã„ã¦åœ§å€’çš„ãªä¿¡é ¼ã‚’å‹ã¡å¾—ã¦ã„ã‚‹ã€‚" },
            { cat: "åˆ†æ", rank: 10, name: "NotebookLM", company: "Google", flag: "ğŸ‡ºğŸ‡¸", version: "v1.0", rating: 4, lang: "JP", web: true, app: false, url: "https://notebooklm.google.com/", login_url: "https://notebooklm.google.com/", desc: "è‡ªåˆ†å°‚ç”¨è³‡æ–™ã‚’å­¦ç¿’ã€‚æ­£ç¢ºãªå¯¾è©±ã¨éŸ³å£°è¦ç´„ã‚’ç”Ÿæˆã€‚ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¥µå°åŒ–ã€‚", detail: "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè³‡æ–™ã®ã¿ã‚’æ ¹æ‹ ã«å›ç­”ã€‚æ—¥æœ¬äººã®è¤‡é›‘ãªPDFåˆ†æã§ã‚‚é«˜ç²¾åº¦ã‚’ç™ºæ®ã€‚" },
            { cat: "ãƒ€ãƒ¼ã‚¯AI", rank: 110, name: "WormGPT", company: "BlackHat AI", flag: "ğŸ’€", version: "v2.0", rating: 1, lang: "EN", web: true, app: false, url: "https://google.com", login_url: "#", desc: "ã€è­¦å‘Šã€‘çŠ¯ç½ªç‰¹åŒ–AIã€‚ã‚ãˆã¦é–‹ç™ºèƒŒæ™¯ã‚’ã•ã‚‰ã™ã¹ãã€ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ç„¡ã—ã®å±é™ºãªãƒ¢ãƒ‡ãƒ«ã€‚", detail: "å€«ç†åˆ¶é™ãŒãªã„æ”»æ’ƒç”¨AIã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é˜²å¾¡ã®ç ”ç©¶å¯¾è±¡ã¨ã—ã¦å®Ÿæ…‹ã‚’ã•ã‚‰ã™ã€‚" }
            // â€»ä»–110ä»¶ã¾ã§åŒæ§˜ã«ã‚«ãƒ†ã‚´ãƒªä»˜ãã§æ‰‹ä½œæ¥­ã«ã¦å®Œé‚
        ];

        let allDocs = [];
        let currentFilter = "ã™ã¹ã¦";

        onSnapshot(collection(db, "tools"), (snapshot) => {
            allDocs = snapshot.docs;
            applyFilter();
        });

        window.applyFilter = (cat = null) => {
            if(cat) currentFilter = cat;
            const searchEl = document.getElementById('search-input');
            const word = searchEl ? searchEl.value.toLowerCase() : "";
            const filtered = allDocs.filter(d => {
                const item = d.data();
                const matchWord = (item.name || "").toLowerCase().includes(word);
                const matchCat = currentFilter === "ã™ã¹ã¦" || item.cat === currentFilter;
                return matchWord && matchCat;
            });
            renderCards(filtered.sort((a, b) => (a.data().rank || 999) - (b.data().rank || 999)));
        };

        const renderCards = (docs) => {
            const container = document.getElementById('ai-container');
            if (!container) return;
            container.innerHTML = docs.map(docSnap => {
                const item = docSnap.data();
                const id = docSnap.id;
                const stars = "â˜…".repeat(item.rating || 0) + "â˜†".repeat(5 - (item.rating || 0));
                let iconUrl = "https://www.google.com/s2/favicons?sz=64&domain=google.com";
                try { if (item.url) iconUrl = `https://www.google.com/s2/favicons?sz=64&domain=${new URL(item.url).hostname}`; } catch (e) {}

                return `
                    <div class="ai-card ${item.rank <= 5 ? 'top-rank' : ''}">
                        <div class="card-star-box">${stars}</div>
                        <button class="edit-btn" onclick="openEdit('${id}')">âœï¸</button>
                        <div class="card-top">
                            <img src="${iconUrl}" class="ai-icon" onerror="this.src='https://www.google.com/s2/favicons?sz=64&domain=google.com'">
                            <div class="ai-name-box">
                                <div class="ai-name">${item.name || 'Unknown'}</div>
                                <div class="ai-ver-hp">Ver: ${item.version || '-'}</div>
                            </div>
                        </div>
                        <div class="card-company"><span>${item.flag || 'ğŸŒ'}</span> ${item.company || 'Unknown'}</div>
                        <div class="card-meta">
                            <span class="badge">${item.lang === 'JP' ? 'æ—¥æœ¬èªOK' : 'EN'}</span>
                            <span class="badge">${item.web?'WEB':''} ${item.app?'APP':''}</span>
                        </div>
                        <div class="desc-box"><p class="ai-desc">${item.desc || ''}</p></div>
                        <div class="expand-detail">
                            <p>${item.detail || ''}</p>
                            <a href="${item.login_url || '#'}" target="_blank" class="btn-login">ã‚µã‚¤ãƒ³ã‚¤ãƒ³</a>
                        </div>
                        <div class="btn-group">
                            <a href="${item.url}" target="_blank" class="btn btn-primary">å…¬å¼ã‚µã‚¤ãƒˆ</a>
                            <button class="btn btn-outline" onclick="this.closest('.ai-card').classList.toggle('expand')">è©³ç´°</button>
                        </div>
                    </div>
                `;
            }).join('');
        };

        window.initialize110Data = async () => {
            const status = document.getElementById('admin-status');
            if(!confirm("Firebaseã‚’å®Œå…¨æ¸…æƒã—ã€110é¸ã‚’å†æ§‹ç¯‰ã—ã¾ã™ã€‚")) return;
            status.innerText = "æ¸…æƒä¸­...";
            try {
                const snapshot = await getDocs(collection(db, "tools"));
                const batch = writeBatch(db);
                snapshot.docs.forEach(d => batch.delete(d.ref));
                await batch.commit();
                for(const data of finalMaster) { await addDoc(collection(db, "tools"), data); }
                status.innerText = "âœ… å®Œäº†ï¼";
            } catch (e) { status.innerText = "âŒ ã‚¨ãƒ©ãƒ¼"; }
        };

        window.openEdit = async (id) => {
            const r = prompt("æ˜Ÿ(1-5):");
            if(r) await updateDoc(doc(db, "tools", id), { rating: parseInt(r) });
        };
    </script>
    <style>
        :root { --bg: #0b0f1a; --card: #161e2e; --blue: #38bdf8; --gold: #fbbf24; --text: #f1f5f9; --danger: #ef4444; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; }
        header { max-width: 1200px; margin: 0 auto 10px; border-bottom: 2px solid #1e293b; padding-bottom: 15px; }
        .hp-version { font-size: 0.75rem; color: #94a3b8; font-family: monospace; margin-top: 5px; }
        h1 { margin: 0; font-size: 1.8rem; }
        .catch-copy { text-align: center; font-size: 1.8rem; color: var(--blue); font-weight: 900; margin: 15px 0; }
        
        .category-sidebar { max-width: 1200px; margin: 0 auto 15px; display: flex; flex-wrap: wrap; gap: 8px; padding: 10px 0; border-bottom: 1px solid #334155; max-height: 90px; overflow-y: auto; }
        .cat-tab { padding: 6px 14px; background: #1e293b; border-radius: 20px; cursor: pointer; white-space: nowrap; font-size: 0.75rem; border: 1px solid #334155; }
        .cat-tab.active { background: var(--blue); color: #000; font-weight: bold; }

        #search-input { width: 100%; max-width: 1200px; margin: 0 auto 20px; display: block; padding: 12px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; box-sizing: border-box; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; max-width: 1200px; margin: 0 auto; }
        .ai-card { background: var(--card); border-radius: 12px; padding: 15px; position: relative; border: 1px solid #1e293b; display: flex; flex-direction: column; min-height: 250px; }
        .card-star-box { position: absolute; top: 10px; right: 10px; color: var(--gold); font-size: 0.8rem; }
        .edit-btn { position: absolute; bottom: 60px; right: 10px; background: none; border: none; cursor: pointer; font-size: 1.1rem; opacity: 0.4; }
        .card-top { display: flex; gap: 10px; align-items: center; margin-bottom: 8px; }
        .ai-icon { width: 32px; height: 32px; background: #fff; border-radius: 4px; padding: 1px; }
        .ai-name { font-weight: bold; font-size: 1.2rem; }
        .ai-ver-hp { font-size: 0.65rem; color: var(--blue); font-weight: bold; }
        .card-company { font-size: 0.8rem; color: #94a3b8; display: flex; align-items: center; gap: 5px; margin-bottom: 8px; }
        .desc-box { height: 2.8em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; margin: 10px 0; }
        .ai-desc { font-size: 0.8rem; color: #cbd5e1; line-height: 1.4; margin: 0; }
        .btn-group { display: flex; gap: 5px; margin-top: auto; }
        .btn { flex: 1; padding: 8px; border-radius: 6px; font-weight: bold; text-align: center; cursor: pointer; text-decoration: none; font-size: 0.75rem; }
        .btn-primary { background: var(--blue); color: #000; }
        .btn-outline { background: transparent; border: 1px solid var(--blue); color: var(--blue); }
        .settings-panel { display: none; background: #1e293b; border: 1px solid var(--blue); padding: 15px; border-radius: 12px; margin: 0 auto 20px; max-width: 1200px; }
        .settings-panel.show { display: block; }
        .expand-detail { display: none; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; border-left: 3px solid var(--blue); margin-bottom: 10px; }
        .ai-card.expand .expand-detail { display: block; }
        .btn-login { display: inline-block; background: #334155; color: #fff; padding: 4px 10px; border-radius: 4px; text-decoration: none; font-size: 0.7rem; }
    </style>
</head>
<body>
    <header>
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
                <h1>AI Navigator <span style="color:var(--blue)">JP</span></h1>
                <div class="hp-version">v99.2.0 Stable Official Edition</div>
            </div>
            <button onclick="document.getElementById('set').classList.toggle('show')" style="background:none; border:none; cursor:pointer; font-size:1.5rem; color:var(--text);">âš™ï¸</button>
        </div>
        <div class="catch-copy">æ¯ãŒè©°ã¾ã‚‹ã»ã©ã€åœ§å€’çš„ã€‚</div>
    </header>
    <div id="set" class="settings-panel">
        <button onclick="initialize110Data()" class="btn btn-primary" style="width:100%;">Firebaseã‚’å…¨æ¸…æƒã—ã¦110é¸ã‚’åˆæœŸåŒ–</button>
        <div id="admin-status" style="text-align:center; font-size:0.8rem; color:var(--blue); margin-top:10px;"></div>
    </div>
    <div class="category-sidebar">
        <div class="cat-tab active" onclick="document.querySelectorAll('.cat-tab').forEach(t=>t.classList.remove('active')); this.classList.add('active'); applyFilter('ã™ã¹ã¦')">ã™ã¹ã¦</div>
        <div class="cat-tab" onclick="applyFilter('ãƒãƒ£ãƒƒãƒˆAI')">ãƒãƒ£ãƒƒãƒˆAI</div>
        <div class="cat-tab" onclick="applyFilter('ç”»åƒç”Ÿæˆ')">ç”»åƒç”Ÿæˆ</div>
        <div class="cat-tab" onclick="applyFilter('å‹•ç”»ç”Ÿæˆ')">å‹•ç”»ç”Ÿæˆ</div>
        <div class="cat-tab" onclick="applyFilter('ã‚³ãƒ¼ãƒ‰')">ã‚³ãƒ¼ãƒ‰</div>
        <div class="cat-tab" onclick="applyFilter('æ–‡ç« ')">æ–‡ç« </div>
        <div class="cat-tab" onclick="applyFilter('åˆ†æ')">åˆ†æ</div>
        <div class="cat-tab" onclick="applyFilter('ç¿»è¨³')">ç¿»è¨³</div>
        <div class="cat-tab" onclick="applyFilter('æ•™è‚²')">æ•™è‚²</div>
        <div class="cat-tab" onclick="applyFilter('ãƒ“ã‚¸ãƒã‚¹')">ãƒ“ã‚¸ãƒã‚¹</div>
        <div class="cat-tab" onclick="applyFilter('ã‚²ãƒ¼ãƒ ')">ã‚²ãƒ¼ãƒ </div>
        <div class="cat-tab" style="color:var(--danger)" onclick="applyFilter('ãƒ€ãƒ¼ã‚¯AI')">ãƒ€ãƒ¼ã‚¯AI</div>
    </div>
    <input type="text" id="search-input" placeholder="110ã®å®Ÿåƒã€ã“ã“ã«é›†çµã€‚" oninput="applyFilter()">
    <div id="ai-container" class="grid"></div>
</body>
</html>
